<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Spring IOCä¸AOPè¯¦è§£ - å±å±çš„åšå®¢</title>
  <meta name="description" content="Spring IOCä¸AOPè¯¦è§£

Springæ¡†æ¶æ˜¯Javaå¼€å‘ä¸­æœ€æµè¡Œçš„æ¡†æ¶ä¹‹ä¸€ï¼Œå…¶æ ¸å¿ƒç‰¹æ€§IOCï¼ˆæ§åˆ¶åè½¬ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ„æˆäº†Springçš„åŸºç¡€ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æè¿™ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚

 ç¬¬ä¸€éƒ¨åˆ†ï¼šIOCï¼ˆæ§åˆ¶åè½¬ï¼‰

 ä»€ä¹ˆæ˜¯IOCï¼Ÿ

IOCï¼ˆInversion of Control...">
  <meta name="theme-color" content="#6366f1">
  <meta property="og:title" content="Spring IOCä¸AOPè¯¦è§£">
  <meta property="og:description" content="Spring IOCä¸AOPè¯¦è§£

Springæ¡†æ¶æ˜¯Javaå¼€å‘ä¸­æœ€æµè¡Œçš„æ¡†æ¶ä¹‹ä¸€ï¼Œå…¶æ ¸å¿ƒç‰¹æ€§IOCï¼ˆæ§åˆ¶åè½¬ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ„æˆäº†Springçš„åŸºç¡€ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æè¿™ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚

 ç¬¬ä¸€éƒ¨åˆ†ï¼šIOCï¼ˆæ§åˆ¶åè½¬ï¼‰

 ä»€ä¹ˆæ˜¯IOCï¼Ÿ

IOCï¼ˆInversion of Control...">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://zhizhi2213.github.io/static/posts/Spring-IOCä¸AOPè¯¦è§£/">
  <meta property="og:site_name" content="å±å±çš„åšå®¢">
  <meta property="og:locale" content="zh_CN">
  <meta property="article:author" content="zhizhi2213">
  <meta property="article:published_time" content="2026å¹´2æœˆ10æ—¥">
  
  <meta property="article:tag" content="{{.}}">
  
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Spring IOCä¸AOPè¯¦è§£">
  <meta name="twitter:description" content="Spring IOCä¸AOPè¯¦è§£

Springæ¡†æ¶æ˜¯Javaå¼€å‘ä¸­æœ€æµè¡Œçš„æ¡†æ¶ä¹‹ä¸€ï¼Œå…¶æ ¸å¿ƒç‰¹æ€§IOCï¼ˆæ§åˆ¶åè½¬ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ„æˆäº†Springçš„åŸºç¡€ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æè¿™ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚

 ç¬¬ä¸€éƒ¨åˆ†ï¼šIOCï¼ˆæ§åˆ¶åè½¬ï¼‰

 ä»€ä¹ˆæ˜¯IOCï¼Ÿ

IOCï¼ˆInversion of Control...">
  <link rel="stylesheet" href="/static/assets/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
  <div class="background-animation"></div>
  <div class="background-animation background-animation-2"></div>
  
  <div class="reading-progress-bar" id="readingProgressBar"></div>
  
  <a href="#main-content" class="skip-link">è·³è½¬åˆ°ä¸»è¦å†…å®¹</a>
  
  <header class="header">
    <div class="container">
      <nav class="nav">
        <a href="/" class="logo">å±å±çš„åšå®¢</a>
        <div class="nav-links">
          <a href="/" class="nav-link">é¦–é¡µ</a>
          <a href="/static/archives/" class="nav-link">å½’æ¡£</a>
          <a href="/static/tags/" class="nav-link">æ ‡ç­¾</a>
        </div>
        <div class="header-actions">
          <button class="search-toggle" aria-label="æœç´¢">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
          </button>
          <button class="theme-toggle" aria-label="åˆ‡æ¢ä¸»é¢˜">
            <span class="theme-icon">ğŸŒ™</span>
          </button>
          <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="æ‰“å¼€èœå•">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
          </button>
        </div>
      </nav>
      
      <div class="mobile-menu" id="mobileMenu">
        <div class="mobile-menu-backdrop" id="mobileMenuBackdrop"></div>
        <div class="mobile-menu-content">
          <div class="mobile-menu-header">
            <a href="/" class="logo">å±å±çš„åšå®¢</a>
            <button class="mobile-menu-close" id="mobileMenuClose" aria-label="å…³é—­èœå•">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
          </div>
          <div class="mobile-menu-links">
            <a href="/" class="mobile-menu-link">é¦–é¡µ</a>
            <a href="/static/archives/" class="mobile-menu-link">å½’æ¡£</a>
            <a href="/static/tags/" class="mobile-menu-link">æ ‡ç­¾</a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="search-modal" id="searchModal">
    <div class="search-modal-backdrop" id="searchBackdrop"></div>
    <div class="search-modal-content">
      <div class="search-header">
        <input type="text" class="search-input" id="searchInput" placeholder="æœç´¢æ–‡ç« ..." autocomplete="off">
        <button class="search-close" id="searchClose" aria-label="å…³é—­æœç´¢">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
        </button>
      </div>
      <div class="search-results" id="searchResults"></div>
    </div>
  </div>

  <main class="main" id="main-content">
    <div class="post-layout-container">
      <div class="post-layout">
        <aside class="posts-sidebar">
          <h3 class="posts-sidebar-title">æ–‡ç« ç›®å½•</h3>
          <nav class="posts-sidebar-content" id="postsSidebarContent">
            <ul class="posts-sidebar-list">
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/MyBatisæºç æ·±åº¦è§£æ/" class="posts-sidebar-link">MyBatisæºç æ·±åº¦è§£æ</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/ThreadLocalå¼‚æ­¥åœºæ™¯é—®é¢˜è§£æ/" class="posts-sidebar-link">ThreadLocalå¼‚æ­¥åœºæ™¯é—®é¢˜è§£æ</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/Spring-IOCä¸AOPè¯¦è§£/" class="posts-sidebar-link active">Spring IOCä¸AOPè¯¦è§£</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/Springæºç ä¸­çš„è®¾è®¡æ¨¡å¼è¯¦è§£/" class="posts-sidebar-link">Springæºç ä¸­çš„è®¾è®¡æ¨¡å¼è¯¦è§£</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/HashMapæºç åˆ†æ/" class="posts-sidebar-link">HashMapæºç åˆ†æ</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/javaè¯­æ³•ç³–è¯¦è§£/" class="posts-sidebar-link">javaè¯­æ³•ç³–è¯¦è§£</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/Trae-Javaç¯å¢ƒé…ç½®/" class="posts-sidebar-link">Trae-Javaç¯å¢ƒé…ç½®</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢/" class="posts-sidebar-link">æ¬¢è¿æ¥åˆ°æˆ‘çš„åšå®¢</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/ä¸ºä»€ä¹ˆJavaä¸­åªæœ‰å€¼ä¼ é€’/" class="posts-sidebar-link">ä¸ºä»€ä¹ˆJavaä¸­åªæœ‰å€¼ä¼ é€’ï¼Ÿ</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/å…³äºæŠ€æœ¯åˆ†äº«/" class="posts-sidebar-link">å…³äºæŠ€æœ¯åˆ†äº«</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/ä»£ç ä¹‹ç¾/" class="posts-sidebar-link">ä»£ç ä¹‹ç¾</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/é¦–é¡µç¾åŒ–æ•™ç¨‹/" class="posts-sidebar-link">é¦–é¡µç¾åŒ–æ•™ç¨‹</a>
              </li>
              
              <li class="posts-sidebar-item">
                <a href="/static/posts/å¦‚ä½•åˆ›å»ºGitHubä¸ªäººç½‘ç«™/" class="posts-sidebar-link">å¦‚ä½•åˆ›å»ºGitHubä¸ªäººç½‘ç«™</a>
              </li>
              
            </ul>
          </nav>
        </aside>

        <article class="post">
          <div class="post-header">
            <a href="/" class="back-link">â† è¿”å›é¦–é¡µ</a>
            <h1 class="post-title">Spring IOCä¸AOPè¯¦è§£</h1>
            <div class="post-meta">
              <span class="post-date">2026å¹´2æœˆ10æ—¥</span>
              <span class="post-views" id="postViews">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path><circle cx="12" cy="12" r="3"></circle></svg>
                <span>åŠ è½½ä¸­...</span>
              </span>
              <span class="post-tag">Spring</span><span class="post-tag">IOC</span><span class="post-tag">AOP</span><span class="post-tag">Java</span>
            </div>
          </div>

          <div class="post-content">
            <h1>Spring IOCä¸AOPè¯¦è§£</h1>
<p>Springæ¡†æ¶æ˜¯Javaå¼€å‘ä¸­æœ€æµè¡Œçš„æ¡†æ¶ä¹‹ä¸€ï¼Œå…¶æ ¸å¿ƒç‰¹æ€§IOCï¼ˆæ§åˆ¶åè½¬ï¼‰å’ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ„æˆäº†Springçš„åŸºç¡€ã€‚æœ¬æ–‡å°†æ·±å…¥è§£æè¿™ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µã€‚</p>
<h2 id="ç¬¬ä¸€éƒ¨åˆ†-IOC-æ§åˆ¶åè½¬">ç¬¬ä¸€éƒ¨åˆ†ï¼šIOCï¼ˆæ§åˆ¶åè½¬ï¼‰</h2>
<h3 id="ä»€ä¹ˆæ˜¯IOC">ä»€ä¹ˆæ˜¯IOCï¼Ÿ</h3>
<p>IOCï¼ˆInversion of Controlï¼Œæ§åˆ¶åè½¬ï¼‰æ˜¯Springçš„æ ¸å¿ƒæ€æƒ³ï¼Œå®ƒå°†å¯¹è±¡çš„åˆ›å»ºã€ç®¡ç†å’Œä¾èµ–å…³ç³»çš„ç»´æŠ¤äº¤ç»™Springå®¹å™¨æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯ç”±å¯¹è±¡è‡ªå·±ç®¡ç†ã€‚</p>
<h4 id="ä¼ ç»Ÿå¼€å‘æ–¹å¼çš„é—®é¢˜" tabindex="-1">ä¼ ç»Ÿå¼€å‘æ–¹å¼çš„é—®é¢˜</h4>
<pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¼ºä¾èµ–ï¼šç›´æ¥åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œè€¦åˆåº¦é«˜</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UserDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p>è¿™ç§æ–¹å¼çš„é—®é¢˜ï¼š</p>
<ul>
<li>è€¦åˆåº¦é«˜ï¼Œéš¾ä»¥æ›¿æ¢å®ç°</li>
<li>ä¸ä¾¿äºå•å…ƒæµ‹è¯•</li>
<li>å¯¹è±¡ç”Ÿå‘½å‘¨æœŸéš¾ä»¥ç®¡ç†</li>
</ul>
<h4 id="iocçš„è§£å†³æ–¹æ¡ˆ" tabindex="-1">IOCçš„è§£å†³æ–¹æ¡ˆ</h4>
<pre class="language-java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token comment">// é€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–</span>
    <span class="token keyword">public</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="IOCå®¹å™¨">IOCå®¹å™¨</h3>
<p>Springæä¾›äº†ä¸¤ç§IOCå®¹å™¨ï¼š</p>
<ol>
<li><strong>BeanFactory</strong>ï¼šåŸºç¡€å®¹å™¨ï¼Œæä¾›åŸºæœ¬çš„IOCåŠŸèƒ½</li>
<li><strong>ApplicationContext</strong>ï¼šé«˜çº§å®¹å™¨ï¼Œæä¾›æ›´å¤šä¼ä¸šçº§ç‰¹æ€§</li>
</ol>
<h4 id="beanfactory" tabindex="-1">BeanFactory</h4>
<pre class="language-java"><code class="language-java"><span class="token comment">// BeanFactoryæ¥å£å®šä¹‰</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">BeanFactory</span> <span class="token punctuation">{</span>

    <span class="token comment">// æ ¹æ®åç§°è·å–Bean</span>
    <span class="token class-name">Object</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>

    <span class="token comment">// æ ¹æ®ç±»å‹è·å–Bean</span>
    <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> <span class="token class-name">T</span> <span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">Class</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">></span></span> requiredType<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span><span class="token punctuation">;</span>

    <span class="token comment">// åˆ¤æ–­æ˜¯å¦åŒ…å«æŒ‡å®šBean</span>
    <span class="token keyword">boolean</span> <span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// åˆ¤æ–­Beanæ˜¯å¦æ˜¯å•ä¾‹</span>
    <span class="token keyword">boolean</span> <span class="token function">isSingleton</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">NoSuchBeanDefinitionException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="applicationcontext" tabindex="-1">ApplicationContext</h4>
<pre class="language-java"><code class="language-java"><span class="token comment">// å¸¸ç”¨çš„ApplicationContextå®ç°</span>
<span class="token comment">// 1. ClassPathXmlApplicationContextï¼šä»ç±»è·¯å¾„åŠ è½½é…ç½®</span>
<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2. FileSystemXmlApplicationContextï¼šä»æ–‡ä»¶ç³»ç»ŸåŠ è½½é…ç½®</span>
<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileSystemXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"D:/config/applicationContext.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 3. AnnotationConfigApplicationContextï¼šåŸºäºæ³¨è§£çš„é…ç½®</span>
<span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">AppConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 4. WebApplicationContextï¼šWebåº”ç”¨çš„å®¹å™¨ï¼ˆåœ¨Spring MVCä¸­ä½¿ç”¨ï¼‰</span>
</code></pre>
<h3 id="ä¾èµ–æ³¨å…¥-DI-çš„ä¸‰ç§æ–¹å¼">ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰çš„ä¸‰ç§æ–¹å¼</h3>
<h4 id="1.-æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆæ¨èï¼‰" tabindex="-1">1. æ„é€ å‡½æ•°æ³¨å…¥ï¼ˆæ¨èï¼‰</h4>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">EmailService</span> emailService<span class="token punctuation">;</span>

    <span class="token comment">// æ„é€ å‡½æ•°æ³¨å…¥ï¼šä¿è¯ä¾èµ–ä¸å¯å˜ï¼Œæ˜“äºæµ‹è¯•</span>
    <span class="token keyword">public</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">,</span> <span class="token class-name">EmailService</span> emailService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>emailService <span class="token operator">=</span> emailService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        emailService<span class="token punctuation">.</span><span class="token function">sendWelcomeEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="2.-setteræ–¹æ³•æ³¨å…¥" tabindex="-1">2. Setteræ–¹æ³•æ³¨å…¥</h4>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">EmailService</span> emailService<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setEmailService</span><span class="token punctuation">(</span><span class="token class-name">EmailService</span> emailService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>emailService <span class="token operator">=</span> emailService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        emailService<span class="token punctuation">.</span><span class="token function">sendWelcomeEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="3.-å­—æ®µæ³¨å…¥ï¼ˆä¸æ¨èï¼‰" tabindex="-1">3. å­—æ®µæ³¨å…¥ï¼ˆä¸æ¨èï¼‰</h4>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">EmailService</span> emailService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        emailService<span class="token punctuation">.</span><span class="token function">sendWelcomeEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>ä¸ºä»€ä¹ˆæ¨èæ„é€ å‡½æ•°æ³¨å…¥ï¼Ÿ</strong></p>
<ul>
<li>ä¿è¯ä¾èµ–ä¸å¯å˜ï¼ˆfinalï¼‰</li>
<li>æ˜ç¡®è¡¨è¾¾ç±»çš„ä¾èµ–å…³ç³»</li>
<li>ä¾¿äºå•å…ƒæµ‹è¯•ï¼ˆå¯ä»¥è½»æ¾mockä¾èµ–ï¼‰</li>
<li>é¿å…å¾ªç¯ä¾èµ–</li>
</ul>
<h3 id="Beançš„é…ç½®æ–¹å¼">Beançš„é…ç½®æ–¹å¼</h3>
<h4 id="xmlé…ç½®æ–¹å¼" tabindex="-1">XMLé…ç½®æ–¹å¼</h4>
<pre class="language-xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>beans</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xmlns:</span>context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/context<span class="token punctuation">"</span></span>
       <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context.xsd<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token comment">&lt;!-- æ‰«ææ³¨è§£ --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

    <span class="token comment">&lt;!-- å®šä¹‰Bean --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.dao.UserDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.example.service.UserService<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!-- æ„é€ å‡½æ•°æ³¨å…¥ --></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userDao<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>beans</span><span class="token punctuation">></span></span>
</code></pre>
<h4 id="æ³¨è§£é…ç½®æ–¹å¼" tabindex="-1">æ³¨è§£é…ç½®æ–¹å¼</h4>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">"com.example"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">UserDao</span> <span class="token function">userDao</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserDaoImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">UserService</span> <span class="token function">userService</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span>userDao<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="è‡ªåŠ¨è£…é…æ³¨è§£" tabindex="-1">è‡ªåŠ¨è£…é…æ³¨è§£</h4>
<pre class="language-java"><code class="language-java"><span class="token comment">// @Componentï¼šé€šç”¨çš„ç»„ä»¶æ³¨è§£</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®ç°ä»£ç </span>
<span class="token punctuation">}</span>

<span class="token comment">// @Repositoryï¼šæ•°æ®è®¿é—®å±‚</span>
<span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®ç°ä»£ç </span>
<span class="token punctuation">}</span>

<span class="token comment">// @Serviceï¼šä¸šåŠ¡é€»è¾‘å±‚</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®ç°ä»£ç </span>
<span class="token punctuation">}</span>

<span class="token comment">// @Controllerï¼šæ§åˆ¶å™¨å±‚</span>
<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®ç°ä»£ç </span>
<span class="token punctuation">}</span>

<span class="token comment">// @Autowiredï¼šè‡ªåŠ¨è£…é…</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"userDaoImpl"</span><span class="token punctuation">)</span> <span class="token comment">// æŒ‡å®šBeanåç§°</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao2<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"userDaoImpl"</span><span class="token punctuation">)</span> <span class="token comment">// JSR-250æ³¨è§£</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao3<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="Beançš„ç”Ÿå‘½å‘¨æœŸ">Beançš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p>Spring Beançš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š</p>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LifeCycleBean</span> <span class="token keyword">implements</span> <span class="token class-name">BeanNameAware</span><span class="token punctuation">,</span> <span class="token class-name">BeanFactoryAware</span><span class="token punctuation">,</span>
        <span class="token class-name">InitializingBean</span><span class="token punctuation">,</span> <span class="token class-name">DisposableBean</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> beanName<span class="token punctuation">;</span>

    <span class="token comment">// 1. å®ä¾‹åŒ–Beanï¼ˆæ„é€ å‡½æ•°ï¼‰</span>
    <span class="token keyword">public</span> <span class="token class-name">LifeCycleBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"1. å®ä¾‹åŒ–Bean"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 2. è®¾ç½®å±æ€§å€¼</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setUserDao</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"2. è®¾ç½®å±æ€§å€¼"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 3. BeanNameAwareæ¥å£å›è°ƒ</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"3. BeanNameAware.setBeanName: "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>beanName <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 4. BeanFactoryAwareæ¥å£å›è°ƒ</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBeanFactory</span><span class="token punctuation">(</span><span class="token class-name">BeanFactory</span> beanFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"4. BeanFactoryAware.setBeanFactory"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 5. BeanPostProcessor - å‰ç½®å¤„ç†</span>
    <span class="token annotation punctuation">@PostConstruct</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">initMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"5. @PostConstructåˆå§‹åŒ–æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 6. InitializingBeanæ¥å£å›è°ƒ</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterPropertiesSet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"6. InitializingBean.afterPropertiesSet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 7. BeanPostProcessor - åç½®å¤„ç†</span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>initMethod <span class="token operator">=</span> <span class="token string">"customInit"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">customInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"7. è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 8. Beanå°±ç»ªï¼Œå¯ä»¥ä½¿ç”¨</span>

    <span class="token comment">// 9. å®¹å™¨å…³é—­æ—¶é”€æ¯Bean</span>
    <span class="token annotation punctuation">@PreDestroy</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">preDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"9. @PreDestroyé”€æ¯æ–¹æ³•"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"10. DisposableBean.destroy"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="Beançš„ä½œç”¨åŸŸ">Beançš„ä½œç”¨åŸŸ</h3>
<pre class="language-java"><code class="language-java"><span class="token comment">// Singletonï¼ˆé»˜è®¤ï¼‰ï¼šå•ä¾‹ï¼Œæ•´ä¸ªå®¹å™¨ä¸­åªæœ‰ä¸€ä¸ªå®ä¾‹</span>
<span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"singleton"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SingletonBean</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®ç°ä»£ç </span>
<span class="token punctuation">}</span>

<span class="token comment">// Prototypeï¼šåŸå‹ï¼Œæ¯æ¬¡è¯·æ±‚éƒ½åˆ›å»ºæ–°å®ä¾‹</span>
<span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"prototype"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PrototypeBean</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®ç°ä»£ç </span>
<span class="token punctuation">}</span>

<span class="token comment">// Requestï¼šWebåº”ç”¨ä¸­ï¼Œæ¯ä¸ªHTTPè¯·æ±‚ä¸€ä¸ªå®ä¾‹</span>
<span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">WebApplicationContext</span><span class="token punctuation">.</span><span class="token constant">SCOPE_REQUEST</span><span class="token punctuation">,</span> proxyMode <span class="token operator">=</span> <span class="token class-name">ScopedProxyMode</span><span class="token punctuation">.</span><span class="token constant">TARGET_CLASS</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestBean</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®ç°ä»£ç </span>
<span class="token punctuation">}</span>

<span class="token comment">// Sessionï¼šWebåº”ç”¨ä¸­ï¼Œæ¯ä¸ªHTTP Sessionä¸€ä¸ªå®ä¾‹</span>
<span class="token annotation punctuation">@Service</span>
<span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token class-name">WebApplicationContext</span><span class="token punctuation">.</span><span class="token constant">SCOPE_SESSION</span><span class="token punctuation">,</span> proxyMode <span class="token operator">=</span> <span class="token class-name">ScopedProxyMode</span><span class="token punctuation">.</span><span class="token constant">TARGET_CLASS</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionBean</span> <span class="token punctuation">{</span>
    <span class="token comment">// å®ç°ä»£ç </span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="ç¬¬äºŒéƒ¨åˆ†-AOP-é¢å‘åˆ‡é¢ç¼–ç¨‹">ç¬¬äºŒéƒ¨åˆ†ï¼šAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</h2>
<h3 id="ä»€ä¹ˆæ˜¯AOP">ä»€ä¹ˆæ˜¯AOPï¼Ÿ</h3>
<p>AOPï¼ˆAspect-Oriented Programmingï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œå®ƒå°†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆå¦‚æ—¥å¿—ã€äº‹åŠ¡ã€å®‰å…¨ç­‰ï¼‰ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥ï¼Œæé«˜ä»£ç çš„æ¨¡å—åŒ–ç¨‹åº¦ã€‚</p>
<h4 id="aopçš„æ ¸å¿ƒæ¦‚å¿µ" tabindex="-1">AOPçš„æ ¸å¿ƒæ¦‚å¿µ</h4>
<pre class="language-java"><code class="language-java"><span class="token comment">// 1. åˆ‡é¢ï¼ˆAspectï¼‰ï¼šæ¨ªåˆ‡å…³æ³¨ç‚¹çš„æ¨¡å—åŒ–</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoggingAspect</span> <span class="token punctuation">{</span>

    <span class="token comment">// 2. è¿æ¥ç‚¹ï¼ˆJoin Pointï¼‰ï¼šç¨‹åºæ‰§è¡Œçš„ç‰¹å®šç‚¹ï¼ˆå¦‚æ–¹æ³•è°ƒç”¨ï¼‰</span>
    <span class="token comment">// 3. åˆ‡ç‚¹ï¼ˆPointcutï¼‰ï¼šåŒ¹é…è¿æ¥ç‚¹çš„è¡¨è¾¾å¼</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* com.example.service.*.*(..))"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serviceLayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// 4. é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåœ¨åˆ‡ç‚¹æ‰§è¡Œçš„ä»£ç </span>
    <span class="token comment">// å‰ç½®é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œ</span>
    <span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"serviceLayer()"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logBefore</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œæ–¹æ³•: "</span> <span class="token operator">+</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// åç½®é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œåæ‰§è¡Œï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰</span>
    <span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"serviceLayer()"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logAfter</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•æ‰§è¡Œå®Œæˆ: "</span> <span class="token operator">+</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// è¿”å›é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•æˆåŠŸè¿”å›åæ‰§è¡Œ</span>
    <span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span>pointcut <span class="token operator">=</span> <span class="token string">"serviceLayer()"</span><span class="token punctuation">,</span> returning <span class="token operator">=</span> <span class="token string">"result"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logAfterReturning</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Object</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•è¿”å›: "</span> <span class="token operator">+</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// å¼‚å¸¸é€šçŸ¥ï¼šåœ¨ç›®æ ‡æ–¹æ³•æŠ›å‡ºå¼‚å¸¸æ—¶æ‰§è¡Œ</span>
    <span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span>pointcut <span class="token operator">=</span> <span class="token string">"serviceLayer()"</span><span class="token punctuation">,</span> throwing <span class="token operator">=</span> <span class="token string">"exception"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logAfterThrowing</span><span class="token punctuation">(</span><span class="token class-name">JoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Throwable</span> exception<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•å¼‚å¸¸: "</span> <span class="token operator">+</span> exception<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// ç¯ç»•é€šçŸ¥ï¼šæœ€å¼ºå¤§çš„é€šçŸ¥ç±»å‹ï¼Œå¯ä»¥å®Œå…¨æ§åˆ¶æ–¹æ³•çš„æ‰§è¡Œ</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"serviceLayer()"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">logAround</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å¼€å§‹æ‰§è¡Œ: "</span> <span class="token operator">+</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Object</span> result <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œå®Œæˆï¼Œè€—æ—¶: "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ‰§è¡Œå¼‚å¸¸: "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="åˆ‡ç‚¹è¡¨è¾¾å¼è¯¦è§£">åˆ‡ç‚¹è¡¨è¾¾å¼è¯¦è§£</h3>
<h4 id="executionè¡¨è¾¾å¼" tabindex="-1">executionè¡¨è¾¾å¼</h4>
<pre class="language-java"><code class="language-java"><span class="token comment">// è¯­æ³•ï¼šexecution(ä¿®é¥°ç¬¦ è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°) å¼‚å¸¸)</span>

<span class="token comment">// 1. åŒ¹é…æ‰€æœ‰publicæ–¹æ³•</span>
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(public * *(..))"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">anyPublicMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 2. åŒ¹é…com.example.serviceåŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•</span>
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* com.example.service.*.*(..))"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">servicePackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 3. åŒ¹é…com.example.serviceåŒ…åŠå…¶å­åŒ…ä¸‹æ‰€æœ‰ç±»çš„æ‰€æœ‰æ–¹æ³•</span>
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* com.example.service..*.*(..))"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serviceAndSubPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 4. åŒ¹é…æ‰€æœ‰ä»¥saveå¼€å¤´çš„æ–¹æ³•</span>
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* save*(..))"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 5. åŒ¹é…UserServiceæ¥å£çš„æ‰€æœ‰æ–¹æ³•</span>
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* com.example.service.UserService.*(..))"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">userServiceMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 6. åŒ¹é…ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºStringçš„æ–¹æ³•</span>
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* *(String, ..))"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">firstParamString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 7. åŒ¹é…è¿”å›å€¼ä¸ºvoidçš„æ–¹æ³•</span>
<span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(void com.example.service.*.*(..))"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">voidMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
<h4 id="å…¶ä»–è¡¨è¾¾å¼ç±»å‹" tabindex="-1">å…¶ä»–è¡¨è¾¾å¼ç±»å‹</h4>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">VariousPointcuts</span> <span class="token punctuation">{</span>

    <span class="token comment">// withinï¼šé™å®šç±»èŒƒå›´</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"within(com.example.service.*)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">withinServicePackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// thisï¼šé™å®šä»£ç†å¯¹è±¡ç±»å‹</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"this(com.example.service.UserService)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">thisUserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// targetï¼šé™å®šç›®æ ‡å¯¹è±¡ç±»å‹</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"target(com.example.service.UserService)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">targetUserService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// argsï¼šé™å®šå‚æ•°ç±»å‹</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"args(com.example.model.User)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">userArgument</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// @annotationï¼šé™å®šæ³¨è§£</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"@annotation(com.example.annotation.Loggable)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">loggableMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// @withinï¼šé™å®šç±»ä¸Šçš„æ³¨è§£</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"@within(com.example.annotation.Service)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serviceClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// @targetï¼šé™å®šç›®æ ‡å¯¹è±¡ä¸Šçš„æ³¨è§£</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"@target(com.example.annotation.RestController)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">restControllerClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// beanï¼šé™å®šBeanåç§°</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"bean(userService)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">userServiceBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token comment">// ç»„åˆè¡¨è¾¾å¼</span>
    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"servicePackage() &amp;&amp; !voidMethods()"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serviceAndNotVoid</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"servicePackage() || controllerMethods()"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">serviceOrController</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="AOPçš„å®é™…åº”ç”¨åœºæ™¯">AOPçš„å®é™…åº”ç”¨åœºæ™¯</h3>
<h4 id="1.-æ—¥å¿—è®°å½•" tabindex="-1">1. æ—¥å¿—è®°å½•</h4>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoggingAspect</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"@annotation(com.example.annotation.Loggable)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">logMethodExecution</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> className <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSimpleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"{}.{}() - å¼€å§‹æ‰§è¡Œï¼Œå‚æ•°: {}"</span><span class="token punctuation">,</span> className<span class="token punctuation">,</span> methodName<span class="token punctuation">,</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> result<span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            result <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">long</span> endTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">"{}.{}() - æ‰§è¡ŒæˆåŠŸï¼Œè¿”å›å€¼: {}, è€—æ—¶: {}ms"</span><span class="token punctuation">,</span>
                    className<span class="token punctuation">,</span> methodName<span class="token punctuation">,</span> result<span class="token punctuation">,</span> endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"{}.{}() - æ‰§è¡Œå¼‚å¸¸: {}"</span><span class="token punctuation">,</span> className<span class="token punctuation">,</span> methodName<span class="token punctuation">,</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨è‡ªå®šä¹‰æ³¨è§£</span>
<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Loggable</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// åœ¨æ–¹æ³•ä¸Šä½¿ç”¨æ³¨è§£</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Loggable</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·æ³¨å†Œ"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä¸šåŠ¡é€»è¾‘</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="2.-æ€§èƒ½ç›‘æ§" tabindex="-1">2. æ€§èƒ½ç›‘æ§</h4>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PerformanceAspect</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">></span></span> methodStats <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"execution(* com.example.service.*.*(..))"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">monitorPerformance</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toShortString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">long</span> duration <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">;</span>
            methodStats<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>methodName<span class="token punctuation">,</span> duration<span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token operator">::</span><span class="token function">sum</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>duration <span class="token operator">></span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"è­¦å‘Š: "</span> <span class="token operator">+</span> methodName <span class="token operator">+</span> <span class="token string">" æ‰§è¡Œæ—¶é—´è¿‡é•¿: "</span> <span class="token operator">+</span> duration <span class="token operator">+</span> <span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Scheduled</span><span class="token punctuation">(</span>fixedRate <span class="token operator">=</span> <span class="token number">60000</span><span class="token punctuation">)</span> <span class="token comment">// æ¯åˆ†é’Ÿè¾“å‡ºä¸€æ¬¡ç»Ÿè®¡ä¿¡æ¯</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">printStatistics</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        methodStats<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> totalTime<span class="token punctuation">)</span> <span class="token operator">-></span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>method <span class="token operator">+</span> <span class="token string">": æ€»è€—æ—¶ "</span> <span class="token operator">+</span> totalTime <span class="token operator">+</span> <span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="3.-ç¼“å­˜" tabindex="-1">3. ç¼“å­˜</h4>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CacheAspect</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> cache <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConcurrentHashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"@annotation(cacheable)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">cacheResult</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Cacheable</span> cacheable<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> cacheKey <span class="token operator">=</span> <span class="token function">generateKey</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">,</span> cacheable<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Object</span> cachedResult <span class="token operator">=</span> cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>cachedResult <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä»ç¼“å­˜ä¸­è·å–: "</span> <span class="token operator">+</span> cacheKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> cachedResult<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">Object</span> result <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>cacheKey<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å­˜å…¥ç¼“å­˜: "</span> <span class="token operator">+</span> cacheKey<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">generateKey</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Cacheable</span> cacheable<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">StringBuilder</span> keyBuilder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        keyBuilder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toShortString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Object</span> arg <span class="token operator">:</span> joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            keyBuilder<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">":"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> keyBuilder<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Cacheable</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">default</span> <span class="token string">""</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Cacheable</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ä»æ•°æ®åº“æŸ¥è¯¢</span>
        <span class="token keyword">return</span> userRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h4 id="4.-äº‹åŠ¡ç®¡ç†" tabindex="-1">4. äº‹åŠ¡ç®¡ç†</h4>
<pre class="language-java"><code class="language-java"><span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransactionAspect</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"@annotation(transactional)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">manageTransaction</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Transactional</span> transactional<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            connection <span class="token operator">=</span> <span class="token function">getDatabaseConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            connection<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">Object</span> result <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            connection<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                connection<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>connection <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä½¿ç”¨</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Transactional</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transferMoney</span><span class="token punctuation">(</span><span class="token class-name">Long</span> fromId<span class="token punctuation">,</span> <span class="token class-name">Long</span> toId<span class="token punctuation">,</span> <span class="token class-name">BigDecimal</span> amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// è½¬è´¦é€»è¾‘</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="Spring-AOPçš„å®ç°åŸç†">Spring AOPçš„å®ç°åŸç†</h3>
<p>Spring AOPä¸»è¦é€šè¿‡åŠ¨æ€ä»£ç†å®ç°ï¼š</p>
<pre class="language-java"><code class="language-java"><span class="token comment">// JDKåŠ¨æ€ä»£ç†ï¼ˆåŸºäºæ¥å£ï¼‰</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">void</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¿å­˜ç”¨æˆ·: "</span> <span class="token operator">+</span> user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// ä»£ç†å®ç°</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceProxy</span> <span class="token keyword">implements</span> <span class="token class-name">InvocationHandler</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Object</span> target<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserServiceProxy</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Proxy</span><span class="token punctuation">.</span><span class="token function">newProxyInstance</span><span class="token punctuation">(</span>
            target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getInterfaces</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">this</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Object</span> proxy<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‰ç½®é€šçŸ¥: "</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åç½®é€šçŸ¥: "</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// CGLIBä»£ç†ï¼ˆåŸºäºç±»ï¼‰</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceCglibProxy</span> <span class="token keyword">implements</span> <span class="token class-name">MethodInterceptor</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">Object</span> target<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserServiceCglibProxy</span><span class="token punctuation">(</span><span class="token class-name">Object</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>target <span class="token operator">=</span> target<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getProxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Enhancer</span> enhancer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enhancer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setSuperclass</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">getClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        enhancer<span class="token punctuation">.</span><span class="token function">setCallback</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> enhancer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">intercept</span><span class="token punctuation">(</span><span class="token class-name">Object</span> obj<span class="token punctuation">,</span> <span class="token class-name">Method</span> method<span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">,</span> <span class="token class-name">MethodProxy</span> proxy<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"å‰ç½®é€šçŸ¥: "</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> proxy<span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"åç½®é€šçŸ¥: "</span> <span class="token operator">+</span> method<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="IOCä¸AOPçš„ç»¼åˆåº”ç”¨">IOCä¸AOPçš„ç»¼åˆåº”ç”¨</h3>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ç»¼åˆç¤ºä¾‹ï¼š</p>
<pre class="language-java"><code class="language-java"><span class="token comment">// 1. å®šä¹‰å®ä½“ç±»</span>
<span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> id<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> username<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> email<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2. å®šä¹‰DAOæ¥å£å’Œå®ç°</span>
<span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token class-name">User</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Repository</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDaoImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDao</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ•°æ®åº“ä¿å­˜é€»è¾‘</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä¿å­˜ç”¨æˆ·åˆ°æ•°æ®åº“"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">findById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ•°æ®åº“æŸ¥è¯¢é€»è¾‘</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä»æ•°æ®åº“æŸ¥è¯¢ç”¨æˆ·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ•°æ®åº“åˆ é™¤é€»è¾‘</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ä»æ•°æ®åº“åˆ é™¤ç”¨æˆ·"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 3. å®šä¹‰Serviceå±‚</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">UserDao</span> userDao<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">EmailService</span> emailService<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">UserService</span><span class="token punctuation">(</span><span class="token class-name">UserDao</span> userDao<span class="token punctuation">,</span> <span class="token class-name">EmailService</span> emailService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userDao <span class="token operator">=</span> userDao<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>emailService <span class="token operator">=</span> emailService<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Loggable</span><span class="token punctuation">(</span><span class="token string">"ç”¨æˆ·æ³¨å†Œ"</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Transactional</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerUser</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        emailService<span class="token punctuation">.</span><span class="token function">sendWelcomeEmail</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getEmail</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Cacheable</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> userDao<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Transactional</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        userDao<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 4. å®šä¹‰åˆ‡é¢</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationAspect</span> <span class="token punctuation">{</span>

    <span class="token comment">// æ—¥å¿—åˆ‡é¢</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"@annotation(com.example.annotation.Loggable)"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">logAround</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> methodName <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•å¼€å§‹æ‰§è¡Œ: "</span> <span class="token operator">+</span> methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Object</span> result <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•æ‰§è¡ŒæˆåŠŸ: "</span> <span class="token operator">+</span> methodName<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ–¹æ³•æ‰§è¡Œå¼‚å¸¸: "</span> <span class="token operator">+</span> methodName <span class="token operator">+</span> <span class="token string">", "</span> <span class="token operator">+</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">throw</span> e<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// æ€§èƒ½ç›‘æ§åˆ‡é¢</span>
    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">"execution(* com.example.service.*.*(..))"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">monitorPerformance</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> startTime <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> result <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> duration <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>duration <span class="token operator">></span> <span class="token number">100</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"æ€§èƒ½è­¦å‘Š: "</span> <span class="token operator">+</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toShortString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token operator">+</span> <span class="token string">" æ‰§è¡Œæ—¶é—´: "</span> <span class="token operator">+</span> duration <span class="token operator">+</span> <span class="token string">"ms"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 5. é…ç½®ç±»</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">"com.example"</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableAspectJAutoProxy</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AppConfig</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>

<span class="token comment">// 6. å¯åŠ¨ç±»</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">ApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">AppConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">UserService</span> userService <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">UserService</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"testuser"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        user<span class="token punctuation">.</span><span class="token function">setEmail</span><span class="token punctuation">(</span><span class="token string">"test@example.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        userService<span class="token punctuation">.</span><span class="token function">registerUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">User</span> foundUser <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getUserById</span><span class="token punctuation">(</span><span class="token number">1L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<h3 id="IOCçš„ä¼˜åŠ¿">IOCçš„ä¼˜åŠ¿</h3>
<ol>
<li><strong>é™ä½è€¦åˆ</strong>ï¼šé€šè¿‡ä¾èµ–æ³¨å…¥é™ä½ç»„ä»¶ä¹‹é—´çš„è€¦åˆåº¦</li>
<li><strong>ä¾¿äºæµ‹è¯•</strong>ï¼šå¯ä»¥è½»æ¾mockä¾èµ–è¿›è¡Œå•å…ƒæµ‹è¯•</li>
<li><strong>é›†ä¸­ç®¡ç†</strong>ï¼šç»Ÿä¸€ç®¡ç†Beançš„ç”Ÿå‘½å‘¨æœŸå’Œé…ç½®</li>
<li><strong>æé«˜å¯ç»´æŠ¤æ€§</strong>ï¼šä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤</li>
</ol>
<h3 id="AOPçš„ä¼˜åŠ¿">AOPçš„ä¼˜åŠ¿</h3>
<ol>
<li><strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>ï¼šå°†æ¨ªåˆ‡å…³æ³¨ç‚¹ä»ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»</li>
<li><strong>ä»£ç å¤ç”¨</strong>ï¼šé¿å…é‡å¤çš„æ¨ªåˆ‡é€»è¾‘ä»£ç </li>
<li><strong>çµæ´»é…ç½®</strong>ï¼šé€šè¿‡åˆ‡ç‚¹è¡¨è¾¾å¼çµæ´»åœ°å®šä¹‰åˆ‡é¢</li>
<li><strong>å¢å¼ºåŠŸèƒ½</strong>ï¼šåœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹å¢å¼ºåŠŸèƒ½</li>
</ol>
<h3 id="æœ€ä½³å®è·µ">æœ€ä½³å®è·µ</h3>
<ol>
<li><strong>ä¼˜å…ˆä½¿ç”¨æ„é€ å‡½æ•°æ³¨å…¥</strong></li>
<li><strong>åˆç†ä½¿ç”¨æ³¨è§£ï¼Œé¿å…è¿‡åº¦ä½¿ç”¨</strong></li>
<li><strong>AOPåˆ‡é¢ä¿æŒç®€å•ï¼Œé¿å…å¤æ‚é€»è¾‘</strong></li>
<li><strong>åˆç†å®šä¹‰Beançš„ä½œç”¨åŸŸ</strong></li>
<li><strong>æ³¨æ„å¾ªç¯ä¾èµ–é—®é¢˜</strong></li>
<li><strong>æ€§èƒ½æ•æ„Ÿçš„ä»£ç æ…ç”¨AOP</strong></li>
</ol>
<h3 id="å­¦ä¹ å»ºè®®">å­¦ä¹ å»ºè®®</h3>
<ol>
<li>ä»ç®€å•çš„ä¾‹å­å¼€å§‹ï¼Œé€æ­¥ç†è§£IOCå’ŒAOPçš„æ¦‚å¿µ</li>
<li>é˜…è¯»Springæºç ï¼Œäº†è§£åº•å±‚å®ç°åŸç†</li>
<li>åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨ï¼Œç§¯ç´¯ç»éªŒ</li>
<li>å­¦ä¹ è®¾è®¡æ¨¡å¼ï¼Œç†è§£IOCå’ŒAOPçš„è®¾è®¡æ€æƒ³</li>
</ol>
<h2 id="å‚è€ƒèµ„æº">å‚è€ƒèµ„æº</h2>
<ul>
<li>Spring Frameworkå®˜æ–¹æ–‡æ¡£</li>
<li>ã€ŠSpringæºç æ·±åº¦è§£æã€‹</li>
<li>ã€ŠSpringå®æˆ˜ã€‹</li>
<li>ã€ŠEffective Javaã€‹</li>
</ul>

          </div>

          <section class="share-section">
            <h3 class="share-title">åˆ†äº«è¿™ç¯‡æ–‡ç« </h3>
            <div class="share-buttons">
              <button class="share-button share-twitter" data-platform="twitter" aria-label="åˆ†äº«åˆ° Twitter">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg>
                <span>Twitter</span>
              </button>
              <button class="share-button share-weibo" data-platform="weibo" aria-label="åˆ†äº«åˆ°å¾®åš">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M10.5 2C6.357 2 3 5.357 3 9.5c0 2.45 1.197 4.627 3.046 5.964-.042.533-.053 1.1.05 1.732.378 2.327 2.48 4.304 5.204 4.304 3.037 0 5.5-2.463 5.5-5.5 0-2.043-1.118-3.827-2.78-4.777.19-.615.3-1.268.3-1.948 0-3.643-2.857-6.5-6.5-6.5zm0 1.5c2.485 0 4.5 2.015 4.5 4.5 0 .405-.065.795-.18 1.167-.55-.125-1.125-.192-1.715-.192-3.59 0-6.5 2.91-6.5 6.5 0 .59.067 1.165.192 1.715-1.247-1.057-2.042-2.635-2.042-4.392 0-3.037 2.463-5.5 5.5-5.5 2.485 0 4.5 2.015 4.5 4.5 0 2.485-2.015 4.5-4.5 4.5-2.485 0-4.5-2.015-4.5-4.5 0-2.485 2.015-4.5 4.5-4.5zm5.5 7c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1z"></path></svg>
                <span>å¾®åš</span>
              </button>
              <button class="share-button share-link" data-platform="link" aria-label="å¤åˆ¶é“¾æ¥">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg>
                <span>å¤åˆ¶é“¾æ¥</span>
              </button>
            </div>
            <div class="share-toast" id="shareToast">é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿</div>
          </section>

          
          <section class="comments-section">
            <div class="comments-container">
              <h3 class="comments-title">è¯„è®ºåŒº</h3>
              <div class="giscus-wrapper">
                <script src="https://giscus.app/client.js"
                  data-repo="zhizhi2213/zhizhi2213.github.io"
                  data-repo-id="R_kgDOQ-4OZg"
                  data-category="Announcements"
                  data-category-id="DIC_kwDOQ-4OZs4C2RLo"
                  data-mapping="title"
                  data-strict="0"
                  data-reactions-enabled="1"
                  data-emit-metadata="0"
                  data-input-position="bottom"
                  data-theme="preferred_color_scheme"
                  data-lang="zh-CN"
                  data-loading="lazy"
                  crossorigin="anonymous"
                  async>
                </script>
              </div>
            </div>
          </section>
          

          <aside class="related-posts">
            <h3 class="related-posts-title">ç›¸å…³æ–‡ç« </h3>
            <ul class="related-posts-list">
              
              <li class="related-posts-item">
                <a href="/static/posts/Springæºç ä¸­çš„è®¾è®¡æ¨¡å¼è¯¦è§£/" class="related-posts-link">
                  <h4 class="related-posts-item-title">Springæºç ä¸­çš„è®¾è®¡æ¨¡å¼è¯¦è§£</h4>
                  <time class="related-posts-item-date">2026å¹´2æœˆ9æ—¥</time>
                </a>
              </li>
              
              <li class="related-posts-item">
                <a href="/static/posts/MyBatisæºç æ·±åº¦è§£æ/" class="related-posts-link">
                  <h4 class="related-posts-item-title">MyBatisæºç æ·±åº¦è§£æ</h4>
                  <time class="related-posts-item-date">2026å¹´2æœˆ11æ—¥</time>
                </a>
              </li>
              
              <li class="related-posts-item">
                <a href="/static/posts/ThreadLocalå¼‚æ­¥åœºæ™¯é—®é¢˜è§£æ/" class="related-posts-link">
                  <h4 class="related-posts-item-title">ThreadLocalå¼‚æ­¥åœºæ™¯é—®é¢˜è§£æ</h4>
                  <time class="related-posts-item-date">2026å¹´2æœˆ11æ—¥</time>
                </a>
              </li>
              
            </ul>
          </aside>
        </article>

        
        <aside class="toc-container">
          <nav class="toc-content" id="tocContent">
            <a href="#ç¬¬ä¸€éƒ¨åˆ†-IOC-æ§åˆ¶åè½¬" class="toc-item toc-level-2" style="">ç¬¬ä¸€éƒ¨åˆ†ï¼šIOCï¼ˆæ§åˆ¶åè½¬ï¼‰</a><a href="#ä»€ä¹ˆæ˜¯IOC" class="toc-item toc-level-3" style="padding-left: 1.5rem;">ä»€ä¹ˆæ˜¯IOCï¼Ÿ</a><a href="#IOCå®¹å™¨" class="toc-item toc-level-3" style="padding-left: 1.5rem;">IOCå®¹å™¨</a><a href="#ä¾èµ–æ³¨å…¥-DI-çš„ä¸‰ç§æ–¹å¼" class="toc-item toc-level-3" style="padding-left: 1.5rem;">ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰çš„ä¸‰ç§æ–¹å¼</a><a href="#Beançš„é…ç½®æ–¹å¼" class="toc-item toc-level-3" style="padding-left: 1.5rem;">Beançš„é…ç½®æ–¹å¼</a><a href="#Beançš„ç”Ÿå‘½å‘¨æœŸ" class="toc-item toc-level-3" style="padding-left: 1.5rem;">Beançš„ç”Ÿå‘½å‘¨æœŸ</a><a href="#Beançš„ä½œç”¨åŸŸ" class="toc-item toc-level-3" style="padding-left: 1.5rem;">Beançš„ä½œç”¨åŸŸ</a><a href="#ç¬¬äºŒéƒ¨åˆ†-AOP-é¢å‘åˆ‡é¢ç¼–ç¨‹" class="toc-item toc-level-2" style="">ç¬¬äºŒéƒ¨åˆ†ï¼šAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</a><a href="#ä»€ä¹ˆæ˜¯AOP" class="toc-item toc-level-3" style="padding-left: 1.5rem;">ä»€ä¹ˆæ˜¯AOPï¼Ÿ</a><a href="#åˆ‡ç‚¹è¡¨è¾¾å¼è¯¦è§£" class="toc-item toc-level-3" style="padding-left: 1.5rem;">åˆ‡ç‚¹è¡¨è¾¾å¼è¯¦è§£</a><a href="#AOPçš„å®é™…åº”ç”¨åœºæ™¯" class="toc-item toc-level-3" style="padding-left: 1.5rem;">AOPçš„å®é™…åº”ç”¨åœºæ™¯</a><a href="#Spring-AOPçš„å®ç°åŸç†" class="toc-item toc-level-3" style="padding-left: 1.5rem;">Spring AOPçš„å®ç°åŸç†</a><a href="#IOCä¸AOPçš„ç»¼åˆåº”ç”¨" class="toc-item toc-level-3" style="padding-left: 1.5rem;">IOCä¸AOPçš„ç»¼åˆåº”ç”¨</a><a href="#æ€»ç»“" class="toc-item toc-level-2" style="">æ€»ç»“</a><a href="#IOCçš„ä¼˜åŠ¿" class="toc-item toc-level-3" style="padding-left: 1.5rem;">IOCçš„ä¼˜åŠ¿</a><a href="#AOPçš„ä¼˜åŠ¿" class="toc-item toc-level-3" style="padding-left: 1.5rem;">AOPçš„ä¼˜åŠ¿</a><a href="#æœ€ä½³å®è·µ" class="toc-item toc-level-3" style="padding-left: 1.5rem;">æœ€ä½³å®è·µ</a><a href="#å­¦ä¹ å»ºè®®" class="toc-item toc-level-3" style="padding-left: 1.5rem;">å­¦ä¹ å»ºè®®</a><a href="#å‚è€ƒèµ„æº" class="toc-item toc-level-2" style="">å‚è€ƒèµ„æº</a>
          </nav>
        </aside>
        
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2026 zhizhi2213. All rights reserved.</p>
      <p class="footer-links">
        <a href="/atom.xml" aria-label="RSS è®¢é˜…">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg>
          RSS è®¢é˜…
        </a>
      </p>
    </div>
  </footer>

  <button class="back-to-top" id="backToTop" aria-label="è¿”å›é¡¶éƒ¨">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg>
  </button>

  <button class="reading-mode-toggle" id="readingModeToggle" aria-label="é˜…è¯»æ¨¡å¼" title="åˆ‡æ¢é˜…è¯»æ¨¡å¼">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path><circle cx="12" cy="12" r="3"></circle></svg>
  </button>

  <script src="/static/assets/script.js" defer></script>
</body>
</html>
