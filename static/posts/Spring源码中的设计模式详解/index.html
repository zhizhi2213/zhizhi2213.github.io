<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Springæºç ä¸­çš„è®¾è®¡æ¨¡å¼è¯¦è§£ - å±å±çš„åšå®¢</title>
  <meta name="description" content="{{post.excerpt}}">
  <link rel="stylesheet" href="/static/assets/style.css">
</head>
<body>
  <div class="background-animation"></div>
  <div class="background-animation background-animation-2"></div>
  
  <header class="header">
    <div class="container">
      <nav class="nav">
        <a href="/" class="logo">å±å±çš„åšå®¢</a>
        <div class="nav-links">
          <a href="/" class="nav-link">é¦–é¡µ</a>
          <a href="/static/archives/" class="nav-link">å½’æ¡£</a>
        </div>
        <button class="theme-toggle" aria-label="åˆ‡æ¢ä¸»é¢˜">
          <span class="theme-icon">ğŸŒ™</span>
        </button>
      </nav>
    </div>
  </header>

  <main class="main">
    <div class="container">
      <article class="post">
        <div class="post-header">
          <a href="/" class="back-link">â† è¿”å›é¦–é¡µ</a>
          <h1 class="post-title">Springæºç ä¸­çš„è®¾è®¡æ¨¡å¼è¯¦è§£</h1>
          <div class="post-meta">
            <span class="post-date">2026å¹´2æœˆ9æ—¥</span>
            <span class="post-tag">è®¾è®¡æ¨¡å¼</span><span class="post-tag">Spring</span><span class="post-tag">Java</span>
          </div>
        </div>
        
        <div class="post-content">
          <h1>Springæºç ä¸­çš„è®¾è®¡æ¨¡å¼è¯¦è§£</h1>

Springæ¡†æ¶ä½œä¸ºJavaå¼€å‘ä¸­æœ€æµè¡Œçš„æ¡†æ¶ä¹‹ä¸€ï¼Œå…¶ä¼˜é›…çš„æ¶æ„è®¾è®¡ç¦»ä¸å¼€å¯¹è®¾è®¡æ¨¡å¼çš„å·§å¦™è¿ç”¨ã€‚æœ¬æ–‡å°†ç»“åˆSpringæºç ï¼Œé‡ç‚¹è®²è§£ä»£ç†æ¨¡å¼ã€é€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼å’Œå·¥å‚æ¨¡å¼åœ¨Springä¸­çš„åº”ç”¨ã€‚

<h2>ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼ï¼Ÿ</h2>

è®¾è®¡æ¨¡å¼æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚

<h2>1. ä»£ç†æ¨¡å¼ï¼ˆProxy Patternï¼‰</h2>

<h3>ä»€ä¹ˆæ˜¯ä»£ç†æ¨¡å¼ï¼Ÿ</h3>

ä»£ç†æ¨¡å¼ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨ã€‚

<h3>Springä¸­çš„åº”ç”¨</h3>

Springä¸­æœ€ç»å…¸çš„ä»£ç†æ¨¡å¼åº”ç”¨å°±æ˜¯<strong>AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</strong>çš„å®ç°ã€‚

<h4>åŠ¨æ€ä»£ç†ç¤ºä¾‹</h4>

Spring AOPä¸»è¦é€šè¿‡ä¸¤ç§æ–¹å¼å®ç°åŠ¨æ€ä»£ç†ï¼š

<ol><li><strong>JDKåŠ¨æ€ä»£ç†</strong>ï¼ˆåŸºäºæ¥å£ï¼‰</li></ol>
<ol><li><strong>CGLIBä»£ç†</strong>ï¼ˆåŸºäºç±»ï¼‰</li></ol>

Springæºç ä¸­çš„å…³é”®ç±»ï¼š
<ul><ol><li><code>org.springframework.aop.framework.JdkDynamicAopProxy</code></li></ol></ul>
<ul><ol><li><code>org.springframework.aop.framework.CglibAopProxy</code></li></ol></ul>

<pre class="language-java" data-lang="java"><code class="language-java">// Springæºç ä¸­çš„JdkåŠ¨æ€ä»£ç†å®ç°ç‰‡æ®µ
public class JdkDynamicAopProxy implements AopProxy, InvocationHandler, Serializable {

    private final AdvisedSupport advised;

    public JdkDynamicAopProxy(AdvisedSupport config) {
        this.advised = config;
    }

    @Override
    public Object getProxy() {
        return getProxy(ClassUtils.getDefaultClassLoader());
    }

    @Override
    public Object getProxy(ClassLoader classLoader) {
        return Proxy.newProxyInstance(classLoader, 
            this.advised.getTargetClass().getInterfaces(), 
            this);
    }

    @Override
    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        MethodInvocation invocation = null;
        Object oldProxy = null;
        boolean setProxyContext = false;

        TargetSource targetSource = this.advised.targetSource;
        Class&lt;?&gt; targetClass = null;
        Object target = null;

        try {
            // æ‰§è¡Œç›®æ ‡æ–¹æ³•
            return retVal;
        } finally {
            // æ¸…ç†å·¥ä½œ
        }
    }
}
</code></pre>

<h4>å®é™…åº”ç”¨åœºæ™¯</h4>

<pre class="language-java" data-lang="java"><code class="language-java">@Service
public class UserServiceImpl implements UserService {

    @Override
    public void saveUser(User user) {
        System.out.println("ä¿å­˜ç”¨æˆ·: " + user.getName());
    }

    @Override
    public void deleteUser(Long userId) {
        System.out.println("åˆ é™¤ç”¨æˆ·: " + userId);
    }
}

// ä½¿ç”¨Spring AOPæ·»åŠ æ—¥å¿—åˆ‡é¢
@Aspect
@Component
public class LoggingAspect {

    @Before("execution(* com.example.service.*.*(..))")
    public void logBefore(JoinPoint joinPoint) {
        System.out.println("æ‰§è¡Œæ–¹æ³•: " + joinPoint.getSignature().getName());
    }

    @After("execution(* com.example.service.*.*(..))")
    public void logAfter(JoinPoint joinPoint) {
        System.out.println("æ–¹æ³•æ‰§è¡Œå®Œæ¯•: " + joinPoint.getSignature().getName());
    }
}
</code></pre>

<h3>ä»£ç†æ¨¡å¼çš„ä¼˜åŠ¿</h3>

<ol><li><strong>èŒè´£æ¸…æ™°</strong>ï¼šçœŸå®è§’è‰²åªéœ€å…³æ³¨ä¸šåŠ¡é€»è¾‘</li></ol>
<ol><li><strong>é«˜æ‰©å±•æ€§</strong>ï¼šä»£ç†å¯¹è±¡å¯ä»¥åœ¨ä¸ä¿®æ”¹çœŸå®å¯¹è±¡çš„æƒ…å†µä¸‹å¢åŠ é¢å¤–åŠŸèƒ½</li></ol>
<ol><li><strong>æ™ºèƒ½åŒ–</strong>ï¼šåŠ¨æ€ä»£ç†å¯ä»¥åœ¨è¿è¡Œæ—¶å†³å®šè°ƒç”¨å“ªä¸ªå¯¹è±¡</li></ol>

<h2>2. é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰</h2>

<h3>ä»€ä¹ˆæ˜¯é€‚é…å™¨æ¨¡å¼ï¼Ÿ</h3>

é€‚é…å™¨æ¨¡å¼å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·å¸Œæœ›çš„å¦å¤–ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚

<h3>Springä¸­çš„åº”ç”¨</h3>

Springä¸­é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨éå¸¸å¹¿æ³›ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š

<h4>2.1 Spring MVCä¸­çš„é€‚é…å™¨</h4>

åœ¨Spring MVCä¸­ï¼Œä¸åŒçš„Controllerç±»å‹ï¼ˆå¦‚æ³¨è§£@Controllerã€å®ç°Controlleræ¥å£ã€HttpRequestHandlerç­‰ï¼‰é€šè¿‡é€‚é…å™¨æ¨¡å¼ç»Ÿä¸€å¤„ç†ã€‚

å…³é”®ç±»ï¼š
<ul><ol><li><code>org.springframework.web.servlet.HandlerAdapter</code></li></ol></ul>
<ul><ol><li><code>org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter</code></li></ol></ul>
<ul><ol><li><code>org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter</code></li></ol></ul>

<pre class="language-java" data-lang="java"><code class="language-java">// HandlerAdapteræ¥å£å®šä¹‰
public interface HandlerAdapter {

    boolean supports(Object handler);

    ModelAndView handle(HttpServletRequest request, 
                        HttpServletResponse response, 
                        Object handler) throws Exception;

    long getLastModified(HttpServletRequest request, Object handler);
}

// RequestMappingHandlerAdapterå®ç°
public class RequestMappingHandlerAdapter extends AbstractHandlerMethodAdapter
        implements BeanFactoryAware, InitializingBean {

    @Override
    protected boolean supportsInternal(HandlerMethod handlerMethod) {
        return true;
    }

    @Override
    protected ModelAndView handleInternal(HttpServletRequest request,
                                          HttpServletResponse response,
                                          HandlerMethod handlerMethod) throws Exception {
        // å¤„ç†æ³¨è§£ç±»å‹çš„Controller
        return invokeHandlerMethod(request, response, handlerMethod);
    }
}

// HttpRequestHandlerAdapterå®ç°
public class HttpRequestHandlerAdapter implements HandlerAdapter {

    @Override
    public boolean supports(Object handler) {
        return (handler instanceof HttpRequestHandler);
    }

    @Override
    public ModelAndView handle(HttpServletRequest request,
                               HttpServletResponse response,
                               Object handler) throws Exception {
        ((HttpRequestHandler) handler).handleRequest(request, response);
        return null;
    }
}
</code></pre>

<h4>2.2 Spring AOPä¸­çš„é€‚é…å™¨</h4>

Spring AOPé€šè¿‡é€‚é…å™¨æ¨¡å¼å°†ä¸åŒçš„Adviceï¼ˆé€šçŸ¥ï¼‰ç±»å‹é€‚é…åˆ°ç»Ÿä¸€çš„æ‹¦æˆªå™¨é“¾ä¸­ã€‚

å…³é”®ç±»ï¼š
<ul><ol><li><code>org.springframework.aop.framework.adapter.AdvisorAdapter</code></li></ol></ul>
<ul><ol><li><code>org.springframework.aop.framework.adapter.MethodBeforeAdviceAdapter</code></li></ol></ul>
<ul><ol><li><code>org.springframework.aop.framework.adapter.AfterReturningAdviceAdapter</code></li></ol></ul>

<pre class="language-java" data-lang="java"><code class="language-java">// AdvisorAdapteræ¥å£
public interface AdvisorAdapter {

    boolean supportsAdvice(Advice advice);

    MethodInterceptor getInterceptor(Advisor advisor);
}

// MethodBeforeAdviceAdapterå®ç°
public class MethodBeforeAdviceAdapter implements AdvisorAdapter, Serializable {

    @Override
    public boolean supportsAdvice(Advice advice) {
        return (advice instanceof MethodBeforeAdvice);
    }

    @Override
    public MethodInterceptor getInterceptor(Advisor advisor) {
        MethodBeforeAdvice advice = (MethodBeforeAdvice) advisor.getAdvice();
        return new MethodBeforeAdviceInterceptor(advice);
    }
}

// é€‚é…å™¨å®ç°
class MethodBeforeAdviceInterceptor implements MethodInterceptor, Serializable {

    private final MethodBeforeAdvice advice;

    public MethodBeforeAdviceInterceptor(MethodBeforeAdvice advice) {
        this.advice = advice;
    }

    @Override
    public Object invoke(MethodInvocation mi) throws Throwable {
        // åœ¨ç›®æ ‡æ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œ
        this.advice.before(mi.getMethod(), mi.getArguments(), mi.getThis());
        return mi.proceed();
    }
}
</code></pre>

<h3>é€‚é…å™¨æ¨¡å¼çš„ä¼˜åŠ¿</h3>

<ol><li><strong>è§£è€¦</strong>ï¼šå°†æ¥å£è½¬æ¢é€»è¾‘ç‹¬ç«‹å‡ºæ¥ï¼Œä¸ä¿®æ”¹åŸæœ‰ä»£ç </li></ol>
<ol><li><strong>å¤ç”¨</strong>ï¼šæé«˜äº†ç±»çš„å¤ç”¨æ€§</li></ol>
<ol><li><strong>çµæ´»</strong>ï¼šå¯ä»¥çµæ´»åœ°æ·»åŠ æ–°çš„é€‚é…å™¨</li></ol>

<h2>3. è£…é¥°å™¨æ¨¡å¼ï¼ˆDecorator Patternï¼‰</h2>

<h3>ä»€ä¹ˆæ˜¯è£…é¥°å™¨æ¨¡å¼ï¼Ÿ</h3>

è£…é¥°å™¨æ¨¡å¼åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›é¢å¤–çš„èŒè´£ã€‚å°±å¢åŠ åŠŸèƒ½æ¥è¯´ï¼Œè£…é¥°å™¨æ¨¡å¼ç›¸æ¯”ç”Ÿæˆå­ç±»æ›´ä¸ºçµæ´»ã€‚

<h3>Springä¸­çš„åº”ç”¨</h3>

Springä¸­è£…é¥°å™¨æ¨¡å¼çš„å…¸å‹åº”ç”¨æ˜¯åœ¨Beançš„ç”Ÿå‘½å‘¨æœŸç®¡ç†å’Œèµ„æºå¤„ç†ä¸­ã€‚

<h4>3.1 BeanWrapperçš„è£…é¥°</h4>

<code>BeanWrapper</code>æ˜¯Springä¸­ç”¨äºæ“ä½œBeanå±æ€§çš„å¼ºå¤§å·¥å…·ï¼Œå®ƒé€šè¿‡è£…é¥°å™¨æ¨¡å¼å¢å¼ºäº†åŸºæœ¬çš„å±æ€§è®¿é—®åŠŸèƒ½ã€‚

å…³é”®ç±»ï¼š
<ul><ol><li><code>org.springframework.beans.BeanWrapper</code></li></ol></ul>
<ul><ol><li><code>org.springframework.beans.BeanWrapperImpl</code></li></ol></ul>

<pre class="language-java" data-lang="java"><code class="language-java">public class BeanWrapperImpl implements BeanWrapper {

    private Object wrappedObject;
    private BeanWrapper nestedBeanWrapper;

    public BeanWrapperImpl(Object wrappedObject) {
        this.wrappedObject = wrappedObject;
    }

    @Override
    public Object getWrappedInstance() {
        return this.wrappedObject;
    }

    @Override
    public Class&lt;?&gt; getWrappedClass() {
        return (this.wrappedObject != null ? this.wrappedObject.getClass() : null);
    }

    @Override
    public void setPropertyValue(String propertyName, Object value) 
            throws BeansException {
        // è£…é¥°ï¼šæ·»åŠ ç±»å‹è½¬æ¢ã€éªŒè¯ç­‰åŠŸèƒ½
        BeanValueHolder valueHolder = new BeanValueHolder(propertyName, value);
        PropertyValue pv = new PropertyValue(propertyName, valueHolder);
        setPropertyValue(pv);
    }

    @Override
    public Object getPropertyValue(String propertyName) 
            throws BeansException {
        // è£…é¥°ï¼šæ·»åŠ ç¼“å­˜ã€ç±»å‹è½¬æ¢ç­‰åŠŸèƒ½
        PropertyTokenHolder tokens = getPropertyNameTokens(propertyName);
        return getPropertyValue(tokens);
    }
}
</code></pre>

<h4>3.2 HttpServletResponseWrapperçš„è£…é¥°</h4>

åœ¨Spring MVCä¸­ï¼Œé€šè¿‡è£…é¥°å™¨æ¨¡å¼åŒ…è£…åŸç”ŸHttpServletResponseå¯¹è±¡ã€‚

<pre class="language-java" data-lang="java"><code class="language-java">public class HttpServletResponseWrapper extends ServletResponseWrapper 
        implements HttpServletResponse {

    private HttpServletResponse response;

    public HttpServletResponseWrapper(HttpServletResponse response) {
        super(response);
        this.response = response;
    }

    @Override
    public void addCookie(Cookie cookie) {
        this.response.addCookie(cookie);
    }

    @Override
    public String encodeURL(String url) {
        return this.response.encodeURL(url);
    }

    // å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ é¢å¤–çš„è£…é¥°åŠŸèƒ½
    public void setCustomHeader(String name, String value) {
        this.response.setHeader(name, value);
    }
}
</code></pre>

<h3>è£…é¥°å™¨æ¨¡å¼çš„ä¼˜åŠ¿</h3>

<ol><li><strong>çµæ´»æ‰©å±•</strong>ï¼šå¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€åœ°æ·»åŠ æˆ–æ’¤é”€åŠŸèƒ½</li></ol>
<ol><li><strong>é¿å…ç±»çˆ†ç‚¸</strong>ï¼šç›¸æ¯”ç»§æ‰¿ï¼Œè£…é¥°å™¨æ¨¡å¼å¯ä»¥é¿å…äº§ç”Ÿå¤§é‡å­ç±»</li></ol>
<ol><li><strong>å•ä¸€èŒè´£</strong>ï¼šæ¯ä¸ªè£…é¥°å™¨åªå…³æ³¨ä¸€ä¸ªç‰¹å®šçš„åŠŸèƒ½</li></ol>

<h2>4. å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰</h2>

<h3>ä»€ä¹ˆæ˜¯å·¥å‚æ¨¡å¼ï¼Ÿ</h3>

å·¥å‚æ¨¡å¼æä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ï¼Œåœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ä¼šå¯¹å®¢æˆ·ç«¯æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œå¹¶ä¸”æ˜¯é€šè¿‡ä½¿ç”¨ä¸€ä¸ªå…±åŒçš„æ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚

<h3>Springä¸­çš„åº”ç”¨</h3>

Springæ¡†æ¶æœ¬èº«å°±æ˜¯ä¸€ä¸ªå¤§å‹çš„å·¥å‚ï¼Œ<strong>IoCå®¹å™¨</strong>å°±æ˜¯å·¥å‚æ¨¡å¼çš„å…¸å‹åº”ç”¨ã€‚

<h4>4.1 BeanFactoryï¼ˆç®€å•å·¥å‚+å·¥å‚æ–¹æ³•ï¼‰</h4>

<code>BeanFactory</code>æ˜¯Springå®¹å™¨çš„æ ¸å¿ƒæ¥å£ï¼Œè´Ÿè´£ç®¡ç†å’Œé…ç½®Beanã€‚

å…³é”®ç±»ï¼š
<ul><ol><li><code>org.springframework.beans.factory.BeanFactory</code></li></ol></ul>
<ul><ol><li><code>org.springframework.beans.factory.xml.XmlBeanFactory</code></li></ol></ul>
<ul><ol><li><code>org.springframework.beans.factory.support.DefaultListableBeanFactory</code></li></ol></ul>

<pre class="language-java" data-lang="java"><code class="language-java">// BeanFactoryæ¥å£
public interface BeanFactory {

    String FACTORY_BEAN_PREFIX = "&amp;";

    Object getBean(String name) throws BeansException;

    &lt;T&gt; T getBean(String name, Class&lt;T&gt; requiredType) throws BeansException;

    &lt;T&gt; T getBean(Class&lt;T&gt; requiredType) throws BeansException;

    Object getBean(String name, Object... args) throws BeansException;

    boolean containsBean(String name);

    boolean isSingleton(String name) throws NoSuchBeanDefinitionException;

    boolean isPrototype(String name) throws NoSuchBeanDefinitionException;

    boolean isTypeMatch(String name, ResolvableType typeToMatch);

    boolean isTypeMatch(String name, Class&lt;?&gt; typeToMatch) 
            throws NoSuchBeanDefinitionException;

    Class&lt;?&gt; getType(String name) throws NoSuchBeanDefinitionException;

    String[] getAliases(String name);
}

// DefaultListableBeanFactoryå®ç°
public class DefaultListableBeanFactory extends AbstractAutowireCapableBeanFactory
        implements ConfigurableListableBeanFactory, BeanDefinitionRegistry {

    private final Map&lt;String, BeanDefinition&gt; beanDefinitionMap = new ConcurrentHashMap&lt;&gt;(256);

    @Override
    public Object getBean(String name) throws BeansException {
        return doGetBean(name, null, null, false);
    }

    protected &lt;T&gt; T doGetBean(String name, @Nullable Class&lt;T&gt; requiredType,
                             @Nullable Object[] args, boolean typeCheckOnly) 
            throws BeansException {

        // 1. æ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦æœ‰å®ä¾‹åŒ–çš„å•ä¾‹Bean
        Object beanInstance = getSingleton(beanName);

        if (beanInstance != null) {
            return (T) beanInstance;
        }

        // 2. è·å–BeanDefinition
        RootBeanDefinition mbd = getMergedLocalBeanDefinition(beanName);

        // 3. åˆ›å»ºBeanå®ä¾‹
        beanInstance = createBean(beanName, mbd, args);

        return (T) beanInstance;
    }

    @Override
    public void registerBeanDefinition(String beanName, BeanDefinition beanDefinition) {
        this.beanDefinitionMap.put(beanName, beanDefinition);
    }
}
</code></pre>

<h4>4.2 ApplicationContextï¼ˆæŠ½è±¡å·¥å‚ï¼‰</h4>

<code>ApplicationContext</code>æ˜¯<code>BeanFactory</code>çš„æ‰©å±•ï¼Œæä¾›äº†æ›´å¤šä¼ä¸šçº§ç‰¹æ€§ã€‚

<pre class="language-java" data-lang="java"><code class="language-java">// ApplicationContextæ¥å£
public interface ApplicationContext extends EnvironmentCapable, 
        ListableBeanFactory, HierarchicalBeanFactory,
        MessageSource, ApplicationEventPublisher, ResourcePatternResolver {

    String getId();

    String getApplicationName();

    String getDisplayName();

    long getStartupDate();

    ApplicationContext getParent();

    AutowireCapableBeanFactory getAutowireCapableBeanFactory();
}

// ClassPathXmlApplicationContextå®ç°
public class ClassPathXmlApplicationContext extends AbstractXmlApplicationContext {

    public ClassPathXmlApplicationContext(String configLocation) throws BeansException {
        this(new String[] {configLocation}, true, null);
    }

    public ClassPathXmlApplicationContext(String[] configLocations, 
                                          boolean refresh, 
                                          @Nullable ApplicationContext parent)
            throws BeansException {
        super(parent);
        setConfigLocations(configLocations);
        if (refresh) {
            refresh();
        }
    }

    @Override
    protected Resource[] getConfigResources() {
        return this.configLocations;
    }
}
</code></pre>

<h4>4.3 FactoryBeanï¼ˆå·¥å‚Beanï¼‰</h4>

<code>FactoryBean</code>æ˜¯Springä¸­ç‰¹æ®Šçš„å·¥å‚Beanæ¥å£ï¼Œç”¨äºåˆ›å»ºå¤æ‚å¯¹è±¡ã€‚

<pre class="language-java" data-lang="java"><code class="language-java">// FactoryBeanæ¥å£
public interface FactoryBean&lt;T&gt; {

    String OBJECT_TYPE_ATTRIBUTE = "factoryBeanObjectType";

    @Nullable
    T getObject() throws Exception;

    @Nullable
    Class&lt;?&gt; getObjectType();

    default boolean isSingleton() {
        return true;
    }
}

// ç¤ºä¾‹ï¼šä½¿ç”¨FactoryBeanåˆ›å»ºå¤æ‚å¯¹è±¡
public class ConnectionFactoryBean implements FactoryBean&lt;Connection&gt; {

    private String url;
    private String username;
    private String password;

    public void setUrl(String url) {
        this.url = url;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    @Override
    public Connection getObject() throws Exception {
        DriverManager.getConnection(url, username, password);
    }

    @Override
    public Class&lt;?&gt; getObjectType() {
        return Connection.class;
    }

    @Override
    public boolean isSingleton() {
        return false;
    }
}
</code></pre>

é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ï¼š
<pre class="language-xml" data-lang="xml"><code class="language-xml">&lt;bean id="connection" class="com.example.ConnectionFactoryBean"&gt;
    &lt;property name="url" value="jdbc:mysql://localhost:3306/test"/&gt;
    &lt;property name="username" value="root"/&gt;
    &lt;property name="password" value="123456"/&gt;
&lt;/bean&gt;
</code></pre>

<h3>å·¥å‚æ¨¡å¼çš„ä¼˜åŠ¿</h3>

<ol><li><strong>è§£è€¦</strong>ï¼šå°†å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»</li></ol>
<ol><li><strong>çµæ´»</strong>ï¼šå¯ä»¥æ–¹ä¾¿åœ°åˆ‡æ¢ä¸åŒçš„å®ç°</li></ol>
<ol><li><strong>ç»Ÿä¸€ç®¡ç†</strong>ï¼šé›†ä¸­ç®¡ç†å¯¹è±¡çš„åˆ›å»ºé€»è¾‘</li></ol>
<ol><li><strong>å¯æ‰©å±•</strong>ï¼šå®¹æ˜“æ‰©å±•æ–°çš„äº§å“ç±»å‹</li></ol>

<h2>æ€»ç»“</h2>

Springæ¡†æ¶é€šè¿‡å¯¹è®¾è®¡æ¨¡å¼çš„å·§å¦™è¿ç”¨ï¼Œå®ç°äº†é«˜åº¦çš„å¯æ‰©å±•æ€§å’Œçµæ´»æ€§ï¼š

| è®¾è®¡æ¨¡å¼ | Springåº”ç”¨åœºæ™¯ | æ ¸å¿ƒç±» |
|---------|--------------|--------|
| ä»£ç†æ¨¡å¼ | AOPå®ç°ã€äº‹åŠ¡ç®¡ç† | JdkDynamicAopProxyã€CglibAopProxy |
| é€‚é…å™¨æ¨¡å¼ | MVC Handleré€‚é…ã€AOP Adviceé€‚é… | HandlerAdapterã€AdvisorAdapter |
| è£…é¥°å™¨æ¨¡å¼ | BeanWrapperã€HttpServletResponseWrapper | BeanWrapperImplã€HttpServletResponseWrapper |
| å·¥å‚æ¨¡å¼ | IoCå®¹å™¨ã€Beanåˆ›å»º | BeanFactoryã€ApplicationContextã€FactoryBean |

å­¦ä¹ Springæºç ä¸­çš„è®¾è®¡æ¨¡å¼åº”ç”¨ï¼Œä¸ä»…èƒ½å¸®åŠ©æˆ‘ä»¬æ›´å¥½åœ°ç†è§£Springæ¡†æ¶çš„å·¥ä½œåŸç†ï¼Œæ›´èƒ½æå‡æˆ‘ä»¬è‡ªèº«çš„ä»£ç è®¾è®¡èƒ½åŠ›ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ ¹æ®å…·ä½“åœºæ™¯é€‰æ‹©åˆé€‚çš„è®¾è®¡æ¨¡å¼ï¼Œé¿å…è¿‡åº¦è®¾è®¡ã€‚

<h2>å‚è€ƒèµ„æº</h2>

<ul><ol><li>Spring Frameworkå®˜æ–¹æ–‡æ¡£</li></ol></ul>
<ul><ol><li>ã€ŠSpringæºç æ·±åº¦è§£æã€‹</li></ol></ul>
<ul><ol><li>ã€Šè®¾è®¡æ¨¡å¼ï¼šå¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€ã€‹</li></ol></ul>
</p>
        </div>
      </article>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2026 zhizhi2213. All rights reserved.</p>
    </div>
  </footer>

  <script src="/static/assets/script.js"></script>
</body>
</html>
